const s={autoAnalyzeIncoming:!1,autoAnalyzeOutgoing:!0,interfaceLanguage:"en",detectionSensitivity:"medium",categories:{insults:!0,threats:!0,harassment:!0,profanity:!0},minSeverity:0,autoSuggestThreshold:80,theme:"auto",badgePosition:"auto",showUnderline:!0,animations:!0,anonymousMode:!1,enableWhatsApp:!0,enableTelegram:!0,enableVK:!0,enableDiscord:!0,backendUrl:"http://127.0.0.1:8000",backendApiKey:"",contextScoring:!1,onboardingCompleted:!1},c={analyzedCount:0,conflictsPrevented:0,sumSeverityBefore:0,sumSeverityAfter:0,replacementCount:0},i=100;function o(){return{...s,categories:{...s.categories}}}async function g(){var e;return(e=chrome.storage)!=null&&e.sync?new Promise(n=>{chrome.storage.sync.get(o(),t=>{const a={...o(),...t,categories:{...s.categories,...t.categories}};n(a)})}):o()}async function f(e){var n;if((n=chrome.storage)!=null&&n.sync)return new Promise(t=>{chrome.storage.sync.set(e,()=>t())})}async function y(){var e;return(e=chrome.storage)!=null&&e.local?new Promise(n=>{chrome.storage.local.get(["analysisHistory"],t=>{n(t.analysisHistory??[])})}):[]}async function m(e){var n;if((n=chrome.storage)!=null&&n.local)return new Promise(t=>{chrome.storage.local.set({analysisHistory:e},()=>t())})}async function d(){var e;if((e=chrome.storage)!=null&&e.local)return new Promise(n=>{chrome.storage.local.set({analysisHistory:[]},()=>n())})}async function u(){var e;return(e=chrome.storage)!=null&&e.local?new Promise(n=>{chrome.storage.local.get(["analysisStats"],t=>{n({...c,...t.analysisStats})})}):{...c}}async function l(e){var n;if((n=chrome.storage)!=null&&n.local)return new Promise(t=>{chrome.storage.local.set({analysisStats:e},()=>t())})}async function h(e,n){const t=await u(),a={...t,analyzedCount:t.analyzedCount+1,sumSeverityBefore:t.sumSeverityBefore+e.severity};if(await l(a),n)return;const r=await y();r.push(e),r.length>i&&r.splice(0,r.length-i),await m(r)}async function S(e,n){const t=await u(),a=e>n?t.conflictsPrevented+1:t.conflictsPrevented,r={...t,conflictsPrevented:a,sumSeverityAfter:t.sumSeverityAfter+n,replacementCount:t.replacementCount+1};await l(r)}function p(e){const n=e.analyzedCount>0?Math.round(e.sumSeverityBefore/e.analyzedCount):0,t=e.replacementCount>0?Math.round(e.sumSeverityAfter/e.replacementCount):null;return{before:n,after:t}}export{S as a,u as b,d as c,y as d,p as f,g,h as r,f as s};
