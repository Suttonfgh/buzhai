import"./modulepreload-polyfill.js";import{s as r,b as S,f as k,g as q}from"./storage.js";const g=document.querySelector("[data-stat=analyzed]"),l=document.querySelector("[data-stat=prevented]"),f=document.querySelector("[data-stat=avg-before]"),v=document.querySelector("[data-stat=avg-after]"),n=document.querySelector("#auto-incoming"),a=document.querySelector("#auto-outgoing"),o=document.querySelector("#context-scoring"),c=document.querySelector("#interface-language"),i=document.querySelector("[data-link=history]"),s=document.querySelector("[data-link=settings]"),d=document.querySelector("[data-link=about]");async function y(){const e=await S(),t=k(e);g&&(g.textContent=String(e.analyzedCount)),l&&(l.textContent=String(e.conflictsPrevented)),f&&(f.textContent=String(t.before)),v&&(v.textContent=t.after===null?"-":String(t.after))}async function h(){const e=await q();n&&(n.checked=e.autoAnalyzeIncoming),a&&(a.checked=e.autoAnalyzeOutgoing),o&&(o.checked=e.contextScoring),c&&(c.value=e.interfaceLanguage)}function u(e){const t=chrome.runtime.getURL(e);chrome.tabs.create({url:t})}n==null||n.addEventListener("change",()=>{r({autoAnalyzeIncoming:!!n.checked})});a==null||a.addEventListener("change",()=>{r({autoAnalyzeOutgoing:!!a.checked})});o==null||o.addEventListener("change",()=>{r({contextScoring:!!o.checked})});c==null||c.addEventListener("change",()=>{r({interfaceLanguage:c.value})});i==null||i.addEventListener("click",()=>u("src/ui/history/index.html"));s==null||s.addEventListener("click",()=>u("src/ui/settings/index.html"));d==null||d.addEventListener("click",()=>u("src/ui/about/index.html"));var m;(m=chrome.storage)==null||m.onChanged.addListener((e,t)=>{t==="local"&&e.analysisStats&&y(),t==="sync"&&h()});y();h();
