import"./modulepreload-polyfill.js";import{c as E,d as U,s as j,g as R}from"./storage.js";const o=document.querySelector("#sensitivity"),n=document.querySelector("#cat-insults"),c=document.querySelector("#cat-threats"),a=document.querySelector("#cat-harassment"),r=document.querySelector("#cat-profanity"),s=document.querySelector("#min-severity"),i=document.querySelector("#auto-suggest-threshold"),l=document.querySelector("#theme"),u=document.querySelector("#badge-position"),d=document.querySelector("#show-underline"),y=document.querySelector("#animations"),m=document.querySelector("#anonymous-mode"),f=document.querySelector("#clear-history"),B=document.querySelector("#export-history"),h=document.querySelector("#enable-whatsapp"),S=document.querySelector("#enable-telegram"),g=document.querySelector("#enable-vk"),k=document.querySelector("#enable-discord"),b=document.querySelector("#backend-url"),q=document.querySelector("#backend-key");function t(e,p){if(e){if(e instanceof HTMLInputElement&&e.type==="checkbox"){e.checked=!!p;return}e.value=String(p)}}async function A(){const e=await R();t(o,e.detectionSensitivity),t(n,e.categories.insults),t(c,e.categories.threats),t(a,e.categories.harassment),t(r,e.categories.profanity),t(s,e.minSeverity),t(i,e.autoSuggestThreshold),t(l,e.theme),t(u,e.badgePosition),t(d,e.showUnderline),t(y,e.animations),t(m,e.anonymousMode),t(h,e.enableWhatsApp),t(S,e.enableTelegram),t(g,e.enableVK),t(k,e.enableDiscord),t(b,e.backendUrl),t(q,e.backendApiKey)}function N(){j({detectionSensitivity:o==null?void 0:o.value,categories:{insults:!!(n!=null&&n.checked),threats:!!(c!=null&&c.checked),harassment:!!(a!=null&&a.checked),profanity:!!(r!=null&&r.checked)},minSeverity:Number((s==null?void 0:s.value)??0),autoSuggestThreshold:Number((i==null?void 0:i.value)??80),theme:l==null?void 0:l.value,badgePosition:u==null?void 0:u.value,showUnderline:!!(d!=null&&d.checked),animations:!!(y!=null&&y.checked),anonymousMode:!!(m!=null&&m.checked),enableWhatsApp:!!(h!=null&&h.checked),enableTelegram:!!(S!=null&&S.checked),enableVK:!!(g!=null&&g.checked),enableDiscord:!!(k!=null&&k.checked),backendUrl:(b==null?void 0:b.value)||"http://127.0.0.1:8000",backendApiKey:(q==null?void 0:q.value)||""})}[o,n,c,a,r,s,i,l,u,d,y,m,h,S,g,k,b,q].forEach(e=>e==null?void 0:e.addEventListener("change",N));f==null||f.addEventListener("click",async()=>{await E(),alert("History cleared.")});B==null||B.addEventListener("click",async()=>{const e=await U(),p=JSON.stringify(e,null,2),L=new Blob([p],{type:"application/json"}),w=URL.createObjectURL(L),v=document.createElement("a");v.href=w,v.download="conflict-translator-history.json",v.click(),URL.revokeObjectURL(w)});A();
